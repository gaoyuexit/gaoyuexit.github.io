<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>çŠ¶æ€ç®¡ç†ä¹‹Blocåˆä½“éªŒ</title>
    <url>/2020/04/29/flutter-bloc/</url>
    <content><![CDATA[<meta name="referrer" content="no-referrer" />

<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote>
<p>Flutterå’ŒSwiftUIæ˜¯å£°æ˜å¼å’Œå“åº”å¼ç¼–ç¨‹åœ¨ç§»åŠ¨ç«¯çš„å…¸èŒƒ, ä½¿ç”¨å®ƒä»¬å¼€å‘å¤æ‚ä¸šåŠ¡, çŠ¶æ€ç®¡ç†æ˜¯ç»•ä¸è¿‡å»çš„è¯é¢˜. </p>
</blockquote>
<p>BLoCã€Business Logic Componentã€‘è®¾è®¡æ¨¡å¼æ˜¯<code>paolo soares</code> å’Œ <code>cong hui</code> åœ¨2018å¹´<code>Google dartconf</code>ä¸Šæå‡ºçš„ï¼Œå…·ä½“è®¾è®¡æ€æƒ³å’Œäºä¼ ç»Ÿå¼€å‘æ–¹å¼çš„æ¯”è¾ƒ, å¯ä»¥å‚è€ƒ<span class="exturl" data-url="aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1QTEhsbjd3SGdQRQ==">YouTubeæ¼”ç¤ºè§†é¢‘<i class="fa fa-external-link-alt"></i></span></p>
<span id="more"></span>
<p>BloCè®¾è®¡æ¨¡å¼æ˜¯Flutterè§£å†³çŠ¶æ€ç®¡ç†çš„ä¸€ç§æ–¹æ¡ˆ, ä»Šå¤©ç¬”è€…å°†ä½¿ç”¨<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ZlbGFuZ2VsL2Jsb2M=">bloc<i class="fa fa-external-link-alt"></i></span>(å®ç°è¯¥è®¾è®¡æ¨¡å¼ä¸”æ¯”è¾ƒæµè¡Œçš„åº“)æ¥æ„å»ºä¸€ä¸ªå·¥ç¨‹ä¸­å®Œæ•´ä¸”å¸¸è§çš„é¡µé¢,  ä½œä¸ºFlutteråˆå­¦è€…, å¸Œæœ›ä»¥æ­¤å’Œå¤§å®¶äº¤æµ, å…±åŒè¿›æ­¥,   ä½ å¯ä»¥åœ¨<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2p1bGl2ZXItZC9ibG9jX2V4YW1wbGU=">è¿™é‡Œ<i class="fa fa-external-link-alt"></i></span>æ‰¾åˆ°è¯¥é¡¹ç›®çš„å®Œæ•´ä»£ç ~</p>
<img src='https://github.com/juliver-d/bloc_example/blob/master/source/bloc_page.gif' alt='page' width='25%'>
<img src="/2020/04/29/flutter-bloc/bloc_page.gif" class="" title="æ•ˆæœ [10] [15]">

<h1 id="BLoC"><a href="#BLoC" class="headerlink" title="BLoC"></a>BLoC</h1><p>ä¸ºä»€ä¹ˆé€‰ç”¨BLoC ? </p>
<blockquote>
<p>BLoCå°†è§†å›¾å±‚ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»å˜å¾—å®¹æ˜“ï¼Œä»è€Œä½¿ä»£ç <strong>ç®€å•</strong>ï¼Œ<strong>å¯æµ‹</strong> å¹¶ä¸”<strong>å¯é‡ç”¨</strong>, æ›´é‡è¦çš„æ˜¯å®ƒä»¥ä¸€ç§æ•°æ®é©±åŠ¨çš„è§„èŒƒåŒ–æµç¨‹æ¥ç¼–å†™, å„ä¸ªå±‚çº§å„å¸å…¶èŒ, æ¸…æ™°åˆ†æ˜</p>
</blockquote>
<p>å¦‚æœä½ æ˜¯Webå¼€å‘è€…, ä½ è‚¯å®šç†Ÿæ‚‰React+Reduxã€å¦‚æœä½ æ˜¯iOSå¼€å‘è€…, ä½ å¯èƒ½ä¼šä½¿ç”¨è¿‡RxSwift+ReactorKit,  å¦‚æœä½ ç†Ÿæ‚‰å•é¡¹æ•°æ®æµå¼€å‘æ¨¡å¼, é‚£ä¹ˆä½ å¯¹BLoCå°±éå¸¸å®¹æ˜“ä¸Šæ‰‹, BLoCå°±æ˜¯ç”¨reactive programmingæ–¹å¼æ„å»ºåº”ç”¨, ä¸€ä¸ªç”±æµæ„æˆçš„å®Œå…¨å¼‚æ­¥çš„ä¸–ç•Œã€‚ä»è€Œè¾¾åˆ°ç•Œé¢ä¸ä¸šåŠ¡åˆ†ç¦»çš„é€»è¾‘ã€‚</p>
<p><img src="https://github.com/juliver-d/bloc_example/blob/master/source/bloc_architecture_full.png" alt="bloc_architecture_full"></p>
<img src="/2020/04/29/flutter-bloc/bloc_architecture_full.png" class="" title="æ¶æ„">

<p>é€šè¿‡bloc<span class="exturl" data-url="aHR0cHM6Ly9ibG9jbGlicmFyeS5kZXYvIy9hcmNoaXRlY3R1cmU/aWQ9cHJlc2VudGF0aW9uLWxheWVy">å®˜ç½‘<i class="fa fa-external-link-alt"></i></span>ä»‹ç»çš„æµç¨‹å›¾æ¥çœ‹, å®ƒå°†åº”ç”¨åˆ†ä¸ºäº†ä¸‰å±‚: å±•ç¤ºå±‚, é€»è¾‘å±‚, æ•°æ®å±‚. è€Œé€šè¿‡æµç¨‹æ¥çœ‹, blocé€»è¾‘å±‚ä½œä¸ºä¸‰å±‚çš„ä¸­æ¢, å¤„ç†ä¸‰ä¸ªå±‚çº§ä¹‹é—´çš„äº¤æµ.</p>
<p>å¹¶ä¸”æˆ‘ä»¬å¯ä»¥æ ¹æ®å®˜æ–¹çš„å‘½åè§„èŒƒæ¥ç»„ç»‡å„ä¸ªå±‚çº§ç»“æ„: </p>
<ul>
<li><p>æ•°æ®å±‚(Data Layer):  èŒè´£æ˜¯ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºä¸­æ£€ç´¢/å¤„ç†æ•°æ®ã€‚</p>
<ul>
<li>ä½¿ç”¨<code>DataProvider</code>æ¥æä¾›åŸå§‹æ•°æ®(eg: CRUDç­‰)</li>
<li>ä½¿ç”¨<code>Repository</code>æ¥åŒ…è£…ä¸€ä¸ªæˆ–å¤šä¸ª<code>DataProvider</code>, ç„¶åä¸blocè¿›è¡Œé€šè®¯</li>
</ul>
</li>
<li><p>é€»è¾‘å±‚(Business Logic Layer):  èŒè´£æ˜¯æ¥æ”¶è¡¨ç¤ºå±‚çš„äº‹ä»¶è¾“å…¥, è¯·æ±‚æ£€ç´¢æ•°æ®, è¿›è€Œä»¥æ•°æ®å»ºç«‹è¡¨ç¤ºå±‚çš„æ–°çŠ¶æ€</p>
<ul>
<li>å¤šä¸ªblocä¹‹é—´ä¹Ÿå¯ä»¥è¿›è¡Œé€šè®¯: æ¯ä¸ªblocéƒ½æœ‰ä¸€ä¸ªçŠ¶æ€æµ, , å…¶ä»–blocå¯ä»¥è®¢é˜…è¯¥æµ, ä»¥ä¾¿å¯¹è‡ªå·±blocå†…éƒ¨åšå‡ºæ–°çŠ¶æ€çš„æ”¹å˜</li>
</ul>
</li>
<li><p>å±•ç¤ºå±‚(Presentation Layer): èŒè´£æ˜¯å‘blocå‘é€ç”¨æˆ·äº‹ä»¶, æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªblocçš„çŠ¶æ€æ¥è¿›è¡Œæ¸²æŸ“æ”¹å˜</p>
</li>
</ul>
<h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>åœ¨å¤§å®¶äº†è§£è¿‡<span class="exturl" data-url="aHR0cHM6Ly9ibG9jbGlicmFyeS5kZXYvIy9mbHV0dGVyYmxvY2NvcmVjb25jZXB0cz9pZD1ibG9jLXdpZGdldHM=">bloc widgets<i class="fa fa-external-link-alt"></i></span>çš„apiä¹‹å, é‚£å°±è·Ÿç€æˆ‘ä¸€èµ·è¿›è¡Œé¡µé¢çš„å¼€å‘å§ğŸ˜¸</p>
<p>è¿™é‡Œæˆ‘å·²ç»å‡†å¤‡å¥½äº†é¡µé¢æ‰€éœ€çš„æ•°æ®æ¥æºäº†:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;code&quot;</span>: <span class="number">0</span>,</span><br><span class="line">	<span class="attr">&quot;errMsg&quot;</span>: <span class="string">&quot;æ“ä½œæˆåŠŸ&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;time&quot;</span>: &#123;</span><br><span class="line">			<span class="attr">&quot;start_time&quot;</span>: <span class="string">&quot;21:00&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;end_time&quot;</span>: <span class="string">&quot;22:00&quot;</span></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">&quot;address&quot;</span>: <span class="string">&quot;åŒ—äº¬&quot;</span>,</span><br><span class="line">		<span class="attr">&quot;types&quot;</span>: [&#123;</span><br><span class="line">			<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;æ™®é€šå…¬å¯“ï¼šä½å®…ç”¨åœ°ï¼Œå…¬å¯“äº§æƒï¼Œ70å¹´ï¼Œæˆ·å‹é¢ç§¯å°&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;value&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;selected&quot;</span>: <span class="number">2</span></span><br><span class="line">		&#125;, &#123;</span><br><span class="line">			<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;å•†åŠ¡å…¬å¯“ï¼šå•†ä¸šç”¨åœ°ï¼Œå•†åŠ¡å…¬å¯“äº§æƒï¼Œ40å¹´&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;value&quot;</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;selected&quot;</span>: <span class="number">1</span></span><br><span class="line">		&#125;, &#123;</span><br><span class="line">			<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;é…’åº—å¼å…¬å¯“ï¼šå•†ä¸šç”¨åœ°ï¼Œå•†åŠ¡å…¬å¯“æˆ–å…¬å¯“äº§æƒï¼Œ40å¹´ï¼Œé¢ç§¯è¾ƒå°&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;value&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">			<span class="attr">&quot;selected&quot;</span>: <span class="number">2</span></span><br><span class="line">		&#125;],</span><br><span class="line">		<span class="attr">&quot;count&quot;</span>: <span class="string">&quot;3&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç®€å•æ¢³ç†ä¸‹é¡µé¢çš„éœ€æ±‚:</p>
<ul>
<li>æ ¹æ®jsonæ•°æ®, å±•ç¤ºé¡µé¢çš„ä¸Šçš„å†…å®¹</li>
<li>ç‚¹å‡»æäº¤å°†ä¿®æ”¹åçš„å†…å®¹æäº¤è‡³æœåŠ¡å™¨, æäº¤å‚æ•°ä¸º:<code>start_time</code>, <code>end_time</code>,<code> address</code>, <code>count</code>å’Œé€‰ä¸­çš„<code>type</code>å¯¹åº”çš„valueå€¼</li>
<li>å¹¶ä¸”åœ¨ç‚¹å‡»é¡µé¢è¿”å›çš„æ—¶å€™, éœ€è¦æ ¡éªŒå½“ç„¶é¡µé¢æ˜¯å¦æœ‰ä¿®æ”¹è¿‡çš„æ•°æ®, å¹¶å¯¹ç”¨æˆ·è¿›è¡Œå¼¹çª—å±•ç¤º</li>
</ul>
<h2 id="æ•°æ®"><a href="#æ•°æ®" class="headerlink" title="æ•°æ®"></a>æ•°æ®</h2><p>å®šä¹‰å±•ç¤ºæ¨¡å‹: </p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormModel</span> </span>&#123;</span><br><span class="line">  <span class="comment">///<span class="markdown">æ—¶é—´</span></span></span><br><span class="line">  Time time;</span><br><span class="line">  <span class="comment">///<span class="markdown">åœ°ç‚¹</span></span></span><br><span class="line">  <span class="built_in">String</span> address;</span><br><span class="line">  <span class="comment">///<span class="markdown">ç±»å‹</span></span></span><br><span class="line">  <span class="built_in">List</span>&lt;SelectValueItem&gt; types;</span><br><span class="line">  <span class="comment">///<span class="markdown">æ¬¡æ•°</span></span></span><br><span class="line">  <span class="built_in">String</span> count;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">///<span class="markdown">help -</span></span></span><br><span class="line">  <span class="keyword">get</span> timeString =&gt; <span class="string">&#x27;<span class="subst">$&#123;time.start&#125;</span>-<span class="subst">$&#123;time.end&#125;</span>&#x27;</span>;</span><br><span class="line">  <span class="keyword">get</span> counString =&gt; <span class="string">&#x27;<span class="subst">$&#123;count&#125;</span>æ¬¡&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">	<span class="comment">///<span class="markdown">è½¬åŒ–ä¸ºæäº¤æ¨¡å‹</span></span></span><br><span class="line">  FormSubmit toSubmit() &#123;</span><br><span class="line">    <span class="keyword">return</span> FormSubmit(</span><br><span class="line">      start: time.start,</span><br><span class="line">      end: time.end,</span><br><span class="line">      address: address,</span><br><span class="line">      type: types.firstWhere((e) =&gt; e.selected, orElse: <span class="keyword">null</span>)?.value ?? <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">      count: count,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰æäº¤æ¨¡å‹</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">///<span class="markdown">æäº¤æ¨¡å‹</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormSubmit</span> <span class="keyword">extends</span> <span class="title">Equatable</span> </span>&#123;</span><br><span class="line">  <span class="comment">///<span class="markdown">èµ·å§‹æ—¶é—´</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> start;</span><br><span class="line">  <span class="comment">///<span class="markdown">ç»“æŸæ—¶é—´</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> end;</span><br><span class="line">  <span class="comment">///<span class="markdown">åœ°å€</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> address;</span><br><span class="line">  <span class="comment">///<span class="markdown">ç±»å‹</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> type;</span><br><span class="line">  <span class="comment">///<span class="markdown">æ¬¡æ•°</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚(FormRepository)</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> _delay = <span class="built_in">Duration</span>(milliseconds: <span class="number">300</span>);</span><br><span class="line">Future&lt;<span class="keyword">void</span>&gt; wait() =&gt; Future.delayed(_delay);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormRepository</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">æŠ“å–è¡¨å•æ•°æ®</span></span></span><br><span class="line">  Future&lt;FormModel&gt; fetchFormData() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> wait(); <span class="comment">//æ¨¡æ‹Ÿå»¶è¿Ÿ</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">String</span> jsonString = <span class="keyword">await</span> rootBundle.loadString(<span class="string">&quot;assets/json/form_data.json&quot;</span>);</span><br><span class="line">    <span class="keyword">final</span> jsonResult = json.decode(jsonString);</span><br><span class="line">    FormModel model = FormModel.fromJson(jsonResult[<span class="string">&#x27;data&#x27;</span>]);</span><br><span class="line">    <span class="keyword">return</span> model;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/// <span class="markdown">è¡¨å•ä¿å­˜</span></span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; saveForm(FormSubmit model) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> wait();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å±•ç¤º"><a href="#å±•ç¤º" class="headerlink" title="å±•ç¤º"></a>å±•ç¤º</h2><p>å±•ç¤ºæ•°æ®çš„é€»è¾‘, æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªform_blocå¤„ç†, ä¸ºäº†ç¼–å†™blocæ¨¡æ¿, <span class="exturl" data-url="aHR0cHM6Ly9wbHVnaW5zLmpldGJyYWlucy5jb20vcGx1Z2luLzEyMTI5LWJsb2MtY29kZS1nZW5lcmF0b3I=">Bloc Code Generator<i class="fa fa-external-link-alt"></i></span>æ’ä»¶å¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆæ„å»ºBlocçš„æ¨¡ç‰ˆä»£ç , æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å°è¯•ä½¿ç”¨</p>
<p>å®šä¹‰Event:</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="meta">@immutable</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">FormEvent</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//è¯·æ±‚æ•°æ®äº‹ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormDataRequestEvent</span> <span class="keyword">extends</span> <span class="title">FormEvent</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰State:</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="meta">@immutable</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">FormDataState</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//åˆå§‹çŠ¶æ€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormInitState</span> <span class="keyword">extends</span> <span class="title">FormDataState</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">//åŠ è½½æˆåŠŸçŠ¶æ€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormLoadedState</span> <span class="keyword">extends</span> <span class="title">FormDataState</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> FormModel data;</span><br><span class="line">  FormLoadedState(&#123;<span class="keyword">this</span>.data&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ•°æ®åŠ è½½å¤±è´¥çŠ¶æ€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormFailureState</span> <span class="keyword">extends</span> <span class="title">FormDataState</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> error;</span><br><span class="line">  FormFailureState(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.error&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ•°æ®è¯·æ±‚ä¸­çŠ¶æ€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormInProgressState</span> <span class="keyword">extends</span> <span class="title">FormDataState</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰bloc: </p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormBloc</span> <span class="keyword">extends</span> <span class="title">Bloc</span>&lt;<span class="title">FormEvent</span>, <span class="title">FormDataState</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  FormDataState <span class="keyword">get</span> initialState =&gt; FormInitState();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> FormRepository repo;</span><br><span class="line">  FormBloc(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.repo&#125;) : <span class="keyword">assert</span>(repo != <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Stream&lt;FormDataState&gt; mapEventToState(</span><br><span class="line">      FormEvent event,</span><br><span class="line">      ) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="comment">//è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">if</span> (event <span class="keyword">is</span> FormDataRequestEvent) &#123;</span><br><span class="line">      <span class="keyword">yield</span> FormInProgressState(); <span class="comment">//è¯·æ±‚ä¸­çŠ¶æ€..</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> model = <span class="keyword">await</span> repo.fetchFormData();</span><br><span class="line">        <span class="keyword">yield</span> FormLoadedState(data: model);<span class="comment">//è¯·æ±‚æˆåŠŸçŠ¶æ€(data)</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="keyword">yield</span> FormFailureState(error: error.toString());<span class="comment">//è¯·æ±‚å¤±è´¥çŠ¶æ€(error)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>å±•ç¤ºæ•°æ®: (åœ¨é¡µé¢buildçš„æ—¶å€™, å°±å¯ä»¥ç›´æ¥å‘é€è¯·æ±‚äº‹ä»¶)</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">///<span class="markdown">å‘é€äº‹ä»¶</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> repo = FormRepository();</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MultiBlocProvider(</span><br><span class="line">      providers: [</span><br><span class="line">        BlocProvider&lt;FormBloc&gt;(</span><br><span class="line">          create: (ctx) =&gt; FormBloc(repo: repo)..add(FormDataRequestEvent()),<span class="comment">//å‘é€è¯·æ±‚äº‹ä»¶</span></span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">      child: FormContent(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="markdown">é¡µé¢å†…å®¹å±•ç¤º (è¿™é‡Œä½¿ç”¨BlocConsumer, é˜²æ­¢listener,builderåµŒå¥—)</span></span></span><br><span class="line">body: Container(</span><br><span class="line">  color: Color(<span class="number">0xFFF6FAFF</span>),</span><br><span class="line">  child: BlocConsumer&lt;FormBloc, FormDataState&gt;(</span><br><span class="line">    listener: (context, state) &#123;</span><br><span class="line">      <span class="keyword">if</span> (state <span class="keyword">is</span> FormFailureState) &#123;<span class="comment">//è¯·æ±‚å¤±è´¥-&gt;toastæç¤º</span></span><br><span class="line">        ToastUtil.<span class="keyword">show</span>(state.error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    builder: (context, state) &#123;</span><br><span class="line">      <span class="keyword">if</span> (state <span class="keyword">is</span> FormInProgressState) &#123;<span class="comment">//è¯·æ±‚ä¸­-&gt;å±•ç¤ºloading</span></span><br><span class="line">        <span class="keyword">return</span> LoadingIndicator(); </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (state <span class="keyword">is</span> FormLoadedState) &#123;<span class="comment">//è¯·æ±‚æˆåŠŸ-&gt;æ ¹æ®dataæ„å»ºUI</span></span><br><span class="line">        <span class="keyword">var</span> model = state.data;</span><br><span class="line">        <span class="keyword">return</span> SingleChildScrollView( </span><br><span class="line">          child: Column(</span><br><span class="line">            children: &lt;Widget&gt;[</span><br><span class="line">              _sectionHeader(),</span><br><span class="line">              ContentItem(title: <span class="string">&#x27;é€‰æ‹©åŒºé—´&#x27;</span>, content: model.timeString, hasArrow: <span class="keyword">true</span>),</span><br><span class="line">              _divider(),</span><br><span class="line">              ContentItem(title: <span class="string">&#x27;é€‰æ‹©åœ°å€&#x27;</span>, content: model.address, hasArrow: <span class="keyword">false</span>,),</span><br><span class="line">              _sectionHeader(),</span><br><span class="line">              TypeItem(items: model.types ?? [], onIndexTap: (index) =&gt; _setType(index),),</span><br><span class="line">              _divider(),</span><br><span class="line">              ContentItem(title: <span class="string">&#x27;é€‰æ‹©æ¬¡æ•°&#x27;</span>, content: model.counString, hasArrow: <span class="keyword">false</span>,),</span><br><span class="line">              _buildSaveButton(),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> Container();</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<h2 id="æ›´æ”¹"><a href="#æ›´æ”¹" class="headerlink" title="æ›´æ”¹"></a>æ›´æ”¹</h2><p>æˆ‘ä»¬åœ¨ğŸ‘†ä¸Šé¢çš„å±•ç¤ºçš„å›¾ä¸­å¯ä»¥çœ‹åˆ°,  é€‰æ‹©åŒºé—´, æ›´æ”¹é€‰æ‹©ç±»å‹, è¿™äº›éƒ½æ˜¯éœ€è¦æ›´æ”¹æ•°æ®æºæ¥è¿›è¡ŒUIæ›´æ”¹çš„,  æ ¹æ®<strong>å•é¡¹æ•°æ®æµæ¨¡å¼</strong>, æ•°æ®éƒ½åº”ç”±blocæ¥è¿›è¡Œç®¡ç†, UIå±‚é¢åªè¿›è¡Œå“åº”å¼çš„æ›´æ–°</p>
<p>æ‰€ä»¥, æˆ‘ä»¬æœ€å¥½ä¸è¦åœ¨UIå±‚é¢æ¥æ“ä½œæ•°æ®æº, è€Œæ˜¯å‘é€<code>é€‰æ‹©åŒºé—´</code>,<code>é€‰æ‹©ç±»å‹</code>çš„äº‹ä»¶, æ¥è®©blocè¿›è¡Œæ•°æ®æºçŠ¶æ€çš„æ”¹å˜</p>
<p>å®šä¹‰ä¸¤ä¸ªEvent:</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ›´æ–°æ—¶é—´</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormUpdateTimeEvent</span> <span class="keyword">extends</span> <span class="title">FormEvent</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> start;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> end;</span><br><span class="line">  FormUpdateTimeEvent(&#123;<span class="keyword">this</span>.start, <span class="keyword">this</span>.end&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ›´æ–°ç±»å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormUpdateTypeEvent</span> <span class="keyword">extends</span> <span class="title">FormEvent</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> selectIndex;</span><br><span class="line">  FormUpdateTypeEvent(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.selectIndex&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›´æ”¹ç›¸åº”çš„State (æ›´æ”¹å, blocè·å–åˆ°çš„stateä¸­çš„dataä¸ºæœ€æ–°çš„æ•°æ®æº)</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Stream&lt;FormDataState&gt; mapEventToState(</span><br><span class="line">    FormEvent event,</span><br><span class="line">    ) <span class="keyword">async</span>* &#123;</span><br><span class="line">  <span class="comment">//æ›´æ–°ç±»å‹</span></span><br><span class="line">  <span class="keyword">if</span> (event <span class="keyword">is</span> FormUpdateTypeEvent) &#123;</span><br><span class="line">    <span class="keyword">if</span> (state <span class="keyword">is</span> FormLoadedState) &#123;</span><br><span class="line">      <span class="keyword">var</span> model = (state <span class="keyword">as</span> FormLoadedState).data;</span><br><span class="line">      model.types.forEach((e) =&gt; e.selected = <span class="keyword">false</span> ); <span class="comment">//åˆ—è¡¨ä¸­å–æ¶ˆæ‰€æœ‰é€‰ä¸­</span></span><br><span class="line">      model.types[event.selectIndex].selected = <span class="keyword">true</span>;  <span class="comment">//selectIndexä¸‹æ ‡æ•°æ®ç½®ä¸ºé€‰ä¸­</span></span><br><span class="line">      <span class="keyword">yield</span> (state <span class="keyword">as</span> FormLoadedState).copyWith(data: model); <span class="comment">//å‘é€æ–°æ•°æ®æºçš„FormLoadedStateçŠ¶æ€</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//æ›´æ–°æ—¶é—´</span></span><br><span class="line">  <span class="keyword">if</span> (event <span class="keyword">is</span> FormUpdateTimeEvent) &#123;</span><br><span class="line">    <span class="keyword">if</span> (state <span class="keyword">is</span> FormLoadedState) &#123;</span><br><span class="line">      <span class="keyword">var</span> model = (state <span class="keyword">as</span> FormLoadedState).data;</span><br><span class="line">      model.time.start = event.start;</span><br><span class="line">      model.time.end = event.end;</span><br><span class="line">      <span class="keyword">yield</span> (state <span class="keyword">as</span> FormLoadedState).copyWith(data: model);<span class="comment">//å‘é€æ–°æ•°æ®æºçš„FormLoadedStateçŠ¶æ€</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨é¡µé¢UIå±‚é¢, å‘é€å®šä¹‰çš„è¿™ä¸¤ä¸ªäº‹ä»¶å³å¯</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">///<span class="markdown">é€‰æ‹©åŒºé—´</span></span></span><br><span class="line"><span class="keyword">void</span> _setTime(<span class="built_in">String</span> start, <span class="built_in">String</span> end) &#123;</span><br><span class="line">  BlocProvider.of&lt;FormBloc&gt;(context).add(FormUpdateTimeEvent(start: start, end: end));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">///<span class="markdown">é€‰æ‹©ç±»å‹</span></span></span><br><span class="line"><span class="keyword">void</span> _setType(<span class="built_in">int</span> index) &#123;</span><br><span class="line">  BlocProvider.of&lt;FormBloc&gt;(context).add(FormUpdateTypeEvent(selectIndex: index));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ä»¥ä¸Šå®Œæˆçš„æ˜¾ç¤ºå’Œæ›´æ”¹, æˆ‘ä»¬ç”¨çš„ä¸€ä¸ªblocå’Œå¯¹åº”çš„å¤šä¸ªçŠ¶æ€, å…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ‰€æœ‰é€»è¾‘åŒ…è£…æˆä¸€ä¸ªé¡µé¢çš„state, å°†æ‰€æœ‰çš„æ•°æ®åŒ…å«åœ¨ä¸€ä¸ªstateä¸­, æ‰€æœ‰çš„Eventå¯¹åº”çš„Stateéƒ½ä¸ºåŒä¸€ä¸ª, é‚£ä¹ˆäº‹ä»¶çš„å¤„ç†ä¸€èˆ¬éƒ½ä¸º<code>yeild state.copyWith(..)</code>   </p>
<p>ä¼ªä»£ç å¦‚è¿™æ ·:</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> DataState &#123;</span><br><span class="line">  init,</span><br><span class="line">  loading,</span><br><span class="line">  loaded,</span><br><span class="line">  fail,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormPageDataState</span> <span class="keyword">extends</span> <span class="title">FormDataState</span> </span>&#123;</span><br><span class="line">  FormModel data, <span class="comment">//æ•°æ®</span></span><br><span class="line">  FormSubmit submitData,<span class="comment">//æäº¤æ•°æ®</span></span><br><span class="line">  DataState dataState,</span><br><span class="line">  ... <span class="comment">//ç­‰å…¶ä»–æ•°æ®</span></span><br><span class="line">  </span><br><span class="line">  FormPageDataState copyWith(&#123;</span><br><span class="line">  FormModel data,</span><br><span class="line">  FormSubmit submitData,</span><br><span class="line">  DataState dataState,</span><br><span class="line">	&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> FormLoadedState(</span><br><span class="line">    data: data ?? <span class="keyword">this</span>.data,</span><br><span class="line">    submitData: submitData ?? <span class="keyword">this</span>.submitData,</span><br><span class="line">    dataState: dataState ?? <span class="keyword">this</span>.dataState,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æäº¤"><a href="#æäº¤" class="headerlink" title="æäº¤"></a>æäº¤</h2><p>æäº¤è¿™éƒ¨åˆ†é€»è¾‘ , æˆ‘å†³å®šä½¿ç”¨å¦ä¸€ä¸ªblocæ¥å¤„ç†é€»è¾‘<code>submit_bloc</code>, æˆ‘ä»¬ä¼šæ€è€ƒæäº¤çš„çŠ¶æ€æœ‰ä»€ä¹ˆ: </p>
<p>é»˜è®¤çŠ¶æ€, æäº¤è¯·æ±‚ä¸­, è¯·æ±‚æˆåŠŸ, è¯·æ±‚å¤±è´¥</p>
<p>å’¦ ??  é‚£æ‰€æœ‰çš„è¯·æ±‚å‡ ä¹éƒ½æ˜¯è¿™æ ·, é‚£æˆ‘ä»¬ä¸å¦‚å®šä¹‰ä¸€ä¸ªæ™®é€šæƒ…å†µä¸‹éƒ½é€šç”¨çš„çŠ¶æ€State: </p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="meta">@immutable</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">NetworkState</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkInitState</span> <span class="keyword">extends</span> <span class="title">NetworkState</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkSuccessState</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">NetworkState</span> </span>&#123; <span class="comment">//ä½¿ç”¨æ³›å‹å®šä¹‰æ•°æ®</span></span><br><span class="line">  <span class="keyword">final</span> T data;</span><br><span class="line">  NetworkSuccessState(&#123;<span class="keyword">this</span>.data&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkFailureState</span> <span class="keyword">extends</span> <span class="title">NetworkState</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> error;</span><br><span class="line">  NetworkFailureState(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.error&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkInProgressState</span> <span class="keyword">extends</span> <span class="title">NetworkState</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹ä¸‹æäº¤çš„Bloc, æ˜¯ä¸æ˜¯ç®€å•å¤šäº†: </p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown"><span class="bullet">-</span> Event</span></span></span><br><span class="line"><span class="comment">//æäº¤</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubmitEvent</span> </span>&#123;</span><br><span class="line">  SubmitEvent(&#123;<span class="keyword">this</span>.submit&#125;);</span><br><span class="line">  FormSubmit submit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="markdown"><span class="bullet">-</span> State -&gt; NetworkState</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="markdown"><span class="bullet">-</span> Bloc</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubmitBloc</span> <span class="keyword">extends</span> <span class="title">Bloc</span>&lt;<span class="title">SubmitEvent</span>, <span class="title">NetworkState</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  NetworkState <span class="keyword">get</span> initialState =&gt; NetworkInitState();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> FormRepository repo;</span><br><span class="line">  SubmitBloc(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.repo&#125;) : <span class="keyword">assert</span>(repo != <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Stream&lt;NetworkState&gt; mapEventToState(</span><br><span class="line">      SubmitEvent event,</span><br><span class="line">      ) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">yield</span> NetworkInProgressState();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="built_in">bool</span> result = <span class="keyword">await</span> repo.saveForm(event.submit);</span><br><span class="line">      <span class="keyword">yield</span> NetworkSuccessState&lt;<span class="built_in">bool</span>&gt;(data: result);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">yield</span> NetworkFailureState(error: error.toString());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ ¡éªŒ"><a href="#æ ¡éªŒ" class="headerlink" title="æ ¡éªŒ"></a>æ ¡éªŒ</h2><p>ç‚¹å‡»è¿”å›æŒ‰é’®çš„æ—¶å€™, æˆ‘ä»¬éœ€è¦åˆ¤æ–­éœ€è¦æäº¤çš„æ•°æ®æ˜¯å¦å˜åŒ–äº†, æˆ‘ä»¬åœ¨è¯¥é¡µé¢è¯·æ±‚æˆåŠŸçš„Stateä¸­, æ·»åŠ ä¸€ä¸ªåˆå§‹åŒ–æäº¤æ¨¡å‹</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormLoadedState</span> <span class="keyword">extends</span> <span class="title">FormDataState</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> FormModel data;</span><br><span class="line">  <span class="keyword">final</span> FormSubmit initSubmit; <span class="comment">//åˆå§‹åŒ–æäº¤æ¨¡å‹</span></span><br><span class="line">  FormLoadedState(&#123;<span class="keyword">this</span>.data, <span class="keyword">this</span>.initSubmit&#125;);</span><br><span class="line"></span><br><span class="line">  FormLoadedState copyWith(&#123;</span><br><span class="line">    FormModel data,</span><br><span class="line">    FormSubmit initSubmitModel,</span><br><span class="line">  &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> FormLoadedState(</span><br><span class="line">      data: data ?? <span class="keyword">this</span>.data,</span><br><span class="line">      initSubmit: initSubmitModel ?? <span class="keyword">this</span>.initSubmit,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯·æ±‚Eventå¯¹åº”çš„Stateä¸º: </span></span><br><span class="line"><span class="keyword">if</span> (event <span class="keyword">is</span> FormDataRequestEvent) &#123;</span><br><span class="line">  <span class="keyword">yield</span> FormInProgressState();</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> model = <span class="keyword">await</span> repo.fetchFormData();</span><br><span class="line">    <span class="keyword">yield</span> FormLoadedState(data: model, initSubmit: model.toSubmit()); <span class="comment">//stateä¸­å¢åŠ ä¸€ä¸ªinitSubmitå±æ€§</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">yield</span> FormFailureState(error: error.toString());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çœ‹ä¸‹UIå±‚çš„äº‹ä»¶å¤„ç†: </p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> WillPopScope(</span><br><span class="line">      onWillPop: () =&gt; _exitPage(context),</span><br><span class="line">      child: ...</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€€å‡º</span></span><br><span class="line">Future&lt;<span class="built_in">bool</span>&gt; _exitPage(BuildContext context) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> state = BlocProvider.of&lt;FormBloc&gt;(context).state;</span><br><span class="line">  <span class="keyword">if</span> (state <span class="keyword">is</span> FormLoadedState) &#123;</span><br><span class="line">    <span class="keyword">if</span> (state.data.toSubmit() != state.initSubmit) &#123;</span><br><span class="line">      <span class="comment">//æ•°æ®æœ‰å˜åŒ–, å¼¹çª—</span></span><br><span class="line">      JLDialog.cancelConfirmTextDialog(context, content: <span class="string">&#x27;å†…å®¹å·²ç»å˜æ›´ï¼Œæ˜¯å¦ä¿å­˜ï¼Ÿ&#x27;</span>).then((confirm) &#123;</span><br><span class="line">        confirm ? _confirmSave() : Navigator.of(context).pop();</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2p1bGl2ZXItZC9ibG9jX2V4YW1wbGU=">å®Œæ•´ç¤ºä¾‹ä»£ç åœ¨è¿™é‡Œ<i class="fa fa-external-link-alt"></i></span></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2ZlbGFuZ2VsL2Jsb2M=">https://github.com/felangel/bloc<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzRzZWVyL29wZW5mbHV0dGVyZWNvbW1lcmNlYXBw">https://github.com/4seer/openflutterecommerceapp<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
        <tag>Bloc</tag>
      </tags>
  </entry>
  <entry>
    <title>åšå®¢æŠ˜è…¾å°è®°</title>
    <url>/2018/03/27/hexo-next-theme/</url>
    <content><![CDATA[<blockquote>
<p>æœ€è¿‘åˆæŠ˜è…¾äº†ä¸€ä¸‹åšå®¢, æ›´æ¢äº†ä¸»é¢˜</p>
</blockquote>
<span id="more"></span>

<h2 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h2><h3 id="é…ç½®ä¸»é¢˜æ–‡ä»¶"><a href="#é…ç½®ä¸»é¢˜æ–‡ä»¶" class="headerlink" title="é…ç½®ä¸»é¢˜æ–‡ä»¶"></a>é…ç½®ä¸»é¢˜æ–‡ä»¶</h3><p>æ ¹æ® Hexo å®˜æ–¹çš„æ¨èï¼Œä¸è¦ç›´æ¥ä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶</p>
<blockquote>
<p>The file should be placed in your site folder, both yml and json are supported. theme inside  _config.yml must be configured for Hexo to read _config.[theme].yml</p>
</blockquote>
<ol>
<li><p>é…ç½®ä¸»é¢˜ä¸º Next ä¸»é¢˜</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># _config.yml</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">&quot;next&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨ site æ ¹ç›®å½•æ–°å»º <code>_config.next.yml</code>æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> touch _config.next.yml</span></span><br></pre></td></tr></table></figure></li>
<li><p>æ‰“å¼€ <code>theme/next/_config.yml</code>æŠŠéœ€è¦ä¿®æ”¹çš„é€‰é¡¹ copy åˆ° <code>_config.next.yml</code>ä¸­</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># _config.next.yml</span></span><br><span class="line"><span class="comment"># è®¾ç½®ç½‘ç«™å›¾æ ‡</span></span><br><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/favicon.ico</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/favicon.ico</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/apple-touch-icon.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/apple-touch-icon.png</span></span><br></pre></td></tr></table></figure></li>
<li><p>hexoå¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åˆå¹¶ <code>_config.next.yml</code> ä¸<code>theme/next/_config.yml</code> çš„è®¾ç½®å†…å®¹ï¼Œä»è€Œè¾¾åˆ°é…ç½®ä¸»é¢˜çš„ä½œç”¨ã€‚</p>
</li>
</ol>
<blockquote>
<p>è¿™æ ·æˆ‘ä»¬å¯ä»¥ä¸ç›´æ¥ä¿®æ”¹theme/nextä¸­çš„å†…å®¹, æ¯æ¬¡æ‹‰å–theme/nextä»“åº“ä¸­çš„æ›´æ–°æ—¶, ä¸ä¼šå› ä¿®æ”¹äº†<code>_config.yml</code>è€Œå‘ç”Ÿå†²çªã€‚ï¼ˆæ¯ä¸ªä¸»é¢˜éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <code>git</code>é¡¹ç›®ï¼‰</p>
</blockquote>
<h3 id="ä¿®æ”¹ä¸»é¢˜æ ·å¼"><a href="#ä¿®æ”¹ä¸»é¢˜æ ·å¼" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜æ ·å¼"></a>ä¿®æ”¹ä¸»é¢˜æ ·å¼</h3><blockquote>
<p> Hexoçš„NexTä¸»é¢˜é‡‡ç”¨njkæ¥ä½œä¸ºHTMLé¢„å¤„ç†å™¨ï¼Œä½¿ç”¨stylæ¥æ‰©å±•cssï¼Œæ‰€ä»¥å¯ä»¥ç®€å•çš„ç†è§£æˆ (html \ subset njk) ï¼Œ(css \ subset styl)ã€‚å®ƒä»¬æ‰©å……äº†ç›¸åº”çš„åŠŸèƒ½å’Œè¯­æ³•æ”¯æŒæ¥æ›´åŠ é«˜æ•ˆçš„æ¶æ„ç½‘é¡µï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå®Œå…¨å¯ä»¥ä½¿ç”¨htmlå’Œcssçš„è¯­æ³•æ¥ç¾åŒ–æˆ‘ä»¬çš„ç½‘é¡µã€‚</p>
</blockquote>
<p>å› ä¸ºæ¯ä¸ªä¸»é¢˜éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <code>git</code>é¡¹ç›®, æ¯ä¸ªä¸»é¢˜çš„å®‰è£…å¤§éƒ½ä¸º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span></span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šæ›´æ”¹è‡ªå·±çš„ä¸»é¢˜,ä¸æ¨èç›´æ¥åœ¨themes/nextä»“åº“å†…ç›´æ¥è¿›è¡Œä¿®æ”¹, è¿™æ ·åœ¨æ‹‰å–æœ€æ–°çš„ä¸»é¢˜æ›´æ–°æ—¶, æˆ‘ä»¬çš„ä¿®æ”¹ä¼šè¢«è¦†ç›–/å†²çªã€‚</p>
<h4 id="1-æŒ‡å®šcustom-file-pathæ¥ä¿®æ”¹"><a href="#1-æŒ‡å®šcustom-file-pathæ¥ä¿®æ”¹" class="headerlink" title="1. æŒ‡å®šcustom_file_pathæ¥ä¿®æ”¹"></a>1. æŒ‡å®šcustom_file_pathæ¥ä¿®æ”¹</h4><p>æ›´æ”¹ä¸»é¢˜çš„æ–¹å¼hexoå¯ä»¥ä½¿ç”¨æŒ‡å®šcustom_file_pathçš„æ ·å¼æ–‡ä»¶styles.stylæ¥è¿›è¡Œæ ·å¼è¦†ç›–, æ¯”å¦‚head.njkæ–‡ä»¶æ¥è¿›è¡Œé¢„å¤„ç†</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="string">source/_data/head.njk</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.njk</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.njk</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.njk</span></span><br><span class="line">  <span class="attr">postBodyEnd:</span> <span class="string">source/_data/post-body-end.njk</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.njk</span></span><br><span class="line">  <span class="attr">bodyEnd:</span> <span class="string">source/_data/body-end.njk</span></span><br><span class="line">  <span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br><span class="line">  <span class="attr">mixin:</span> <span class="string">source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚æŒ‡å®šçš„source/_data/styles.stylæ¥è¿›è¡Œè¦†ç›–é»˜è®¤æ ·å¼</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* header-é¡µé¢èƒŒæ™¯ */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">$body-bg-url</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: dark) &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* sidebar-æ ‡é¢˜ */</span></span><br><span class="line"><span class="selector-class">.site-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-ä½¿ç”¨submoduleç®¡ç†ä¸»é¢˜"><a href="#2-ä½¿ç”¨submoduleç®¡ç†ä¸»é¢˜" class="headerlink" title="2. ä½¿ç”¨submoduleç®¡ç†ä¸»é¢˜"></a>2. ä½¿ç”¨submoduleç®¡ç†ä¸»é¢˜</h4><ol>
<li>åœ¨GitHubä¸Šï¼ŒæŠŠåŸä½œè€…çš„ä¸»é¢˜forkåˆ°æˆ‘ä»¬è‡ªå·±çš„ä»“åº“ä¸­</li>
<li>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŠŠforkçš„NexTä¸»é¢˜æ·»åŠ ä¸ºæˆ‘ä»¬åšå®¢çš„å­æ¨¡å—</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git submodule add https://github.com/&lt;username&gt;/hexo-theme-next themes/next</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥æŠŠè‡ªå·±ä¿®æ”¹çš„ä¸»é¢˜æäº¤åˆ°æˆ‘ä»¬è‡ªå·±forkçš„ä»“åº“ä¸­è¿›è¡Œå­˜å‚¨</p>
<p>submoduleå‘½ä»¤ä¼šåœ¨ç›®å½•ä¸‹å¤šä¸€ä¸ª<code>.gitmodules</code>æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat .gitmodules</span></span><br><span class="line">[submodule &quot;themes/next&quot;]</span><br><span class="line">    path = themes/next</span><br><span class="line">    url = git@github.com:gaoyuexit/hexo-theme-next</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ ? </p>
<p>1.æ¨é€è‡³ GitHub</p>
<p>å½“æˆ‘ä»¬å¯¹ä¸»é¢˜ï¼ˆå­æ¨¡å—ï¼‰çš„å†…å®¹è¿›è¡Œä¿®æ”¹æ—¶ï¼ŒHexo ç«™ç‚¹ï¼ˆä¸»æ¨¡å—ï¼‰åªçŸ¥é“æˆ‘ä»¬è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½†æ˜¯å¹¶ä¸ä¼šç®¡ç†æˆ‘ä»¬å…·ä½“è¿›è¡Œäº†ä»€ä¹ˆä¿®æ”¹ã€‚</p>
<blockquote>
<p>å› æ­¤ï¼Œå­æ¨¡å—å’Œä¸»æ¨¡å—éœ€è¦åˆ†å¼€ pushï¼Œä¸€èˆ¬å…ˆæ¨é€å­æ¨¡å—ï¼Œåæ¨é€ä¸»æ¨¡å—ã€‚</p>
</blockquote>
<p>2.ä»åŸä½œè€…å¤„æ›´æ–°ä¸»é¢˜</p>
<p>å¦‚æœä½¿ç”¨çš„ä¸»é¢˜ä»åœ¨è¢«ç»´æŠ¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½ä»è¿œç¨‹è·å–æ›´æ–°:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git submodule update --remote</span></span><br></pre></td></tr></table></figure>

<p>3.åœ¨å¦ä¸€å°ç”µè„‘ä¸Šå·¥ä½œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> --recursive &lt;your repo address&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ–è€… (ğŸ‘† å’Œ ğŸ‘‡ çš„å‘½ä»¤åŠŸèƒ½æ˜¯ä¸€æ ·çš„)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> &lt;your repo address&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git submodule update --init</span></span><br></pre></td></tr></table></figure>

<p>4.åˆ é™¤submodule</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git submodule deinit &lt;submodule-name&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="çœ‹æ¿å¨˜"><a href="#çœ‹æ¿å¨˜" class="headerlink" title="çœ‹æ¿å¨˜"></a>çœ‹æ¿å¨˜</h2><h3 id="ç®€æ˜“ç‰ˆhexo-helper-live2d"><a href="#ç®€æ˜“ç‰ˆhexo-helper-live2d" class="headerlink" title="ç®€æ˜“ç‰ˆhexo-helper-live2d"></a>ç®€æ˜“ç‰ˆ<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VZSE4vaGV4by1oZWxwZXItbGl2ZTJk">hexo-helper-live2d<i class="fa fa-external-link-alt"></i></span></h3><h3 id="åŠŸèƒ½ç‰ˆlive2d-widget"><a href="#åŠŸèƒ½ç‰ˆlive2d-widget" class="headerlink" title="åŠŸèƒ½ç‰ˆlive2d-widget"></a>åŠŸèƒ½ç‰ˆ<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N0ZXZlbmpvZXpoYW5nL2xpdmUyZC13aWRnZXQ=">live2d-widget<i class="fa fa-external-link-alt"></i></span></h3><p>ä»¥<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N0ZXZlbmpvZXpoYW5nL2xpdmUyZC13aWRnZXQ=">live2d-widget<i class="fa fa-external-link-alt"></i></span>ä¸ºä¾‹, å…ˆforké¡¹ç›®åˆ°è‡ªå·±çš„githubä»“åº“, æ–¹ä¾¿åç»­è‡ªå·±å®šåˆ¶</p>
<p>åœ¨/themes/next/layout/_layout.swigçš„<code>head</code>æ ‡ç­¾å†…æ·»åŠ å¦‚ä¸‹ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/gaoyuexit/live2d-widget@latest/autoload.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="Pjax"><a href="#Pjax" class="headerlink" title="Pjax"></a><em>Pjax</em></h2><p><strong>å•é¡µåº”ç”¨</strong>ï¼ˆè‹±è¯­ï¼šsingle-page applicationï¼Œç¼©å†™<strong>SPA</strong>ï¼‰æ˜¯ä¸€ç§ç½‘ç»œåº”ç”¨ç¨‹åºæˆ–ç½‘ç«™çš„æ¨¡å‹ï¼Œå®ƒé€šè¿‡åŠ¨æ€é‡å†™å½“å‰é¡µé¢æ¥ä¸ç”¨æˆ·äº¤äº’ï¼Œè€Œéä¼ ç»Ÿçš„ä»æœåŠ¡å™¨é‡æ–°åŠ è½½æ•´ä¸ªæ–°é¡µé¢ã€‚è¿™ç§æ–¹æ³•é¿å…äº†é¡µé¢ä¹‹é—´åˆ‡æ¢æ‰“æ–­ç”¨æˆ·ä½“éªŒï¼Œä½¿åº”ç”¨ç¨‹åºæ›´åƒä¸€ä¸ªæ¡Œé¢åº”ç”¨ç¨‹åºã€‚<strong>ä¸å•é¡µåº”ç”¨çš„äº¤äº’é€šå¸¸æ¶‰åŠåˆ°ä¸ç½‘é¡µæœåŠ¡å™¨åç«¯çš„åŠ¨æ€é€šä¿¡</strong>ã€‚è¯´ç™½äº†ä¹Ÿå°±æ˜¯é€šè¿‡ <code>pushState() + XHR</code> æŠ€æœ¯å®ç°çš„é¡µé¢åˆ‡æ¢ã€‚</p>
<p>è€Œ Hexo ç«™ç‚¹æœ¬èº«æ˜¯ä¸ªé™æ€é¡µé¢ï¼Œæ— æ³•å‘å‡ºåŠ¨æ€è¯·æ±‚ï¼Œæ‰€ä»¥è¿™é‡Œä¾¿å¼•å‡ºäº†æœ¬æ–‡çš„ä¸»è§’ Pjax æ¡†æ¶äº†ã€‚å…¶æ€è·¯æ˜¯é€šè¿‡æ‹¦æˆª <code>a</code> é“¾æ¥ï¼Œå‘é€ XHR è¯·æ±‚ï¼Œè·å–ä¸‹çº§é¡µé¢å†…å®¹ï¼Œæ¥ç€æ›¿æ¢æŒ‡å®šåŒºåŸŸå®Œæˆæ•´ä¸ªè¿‡ç¨‹ã€‚ç”±äºä¸æ˜¯åŠ¨æ€ç½‘ç«™ï¼ŒPjax åœ¨è¯·æ±‚è¿‡ç¨‹ä¸­è·å–çš„æ˜¯æ•´ä¸ªç«™ç‚¹çš„ Html å†…å®¹ï¼Œæ‰€ä»¥è¯·æ±‚æœ¬èº«æ˜¯æ— æ³•è¾¾åˆ°åŠ é€Ÿçš„ï¼Œä½†æ˜¯å¯ä»¥å‡å°‘é¡µé¢ä¸­ JS æ–‡ä»¶çš„é‡å¤è¯·æ±‚ï¼Œæ­¤å¤–è¿˜å¯ä»¥åˆ©ç”¨ä¸€äº›é¢„åŠ è½½æŠ€æœ¯ï¼ˆé¢„è¯»ç¼“å­˜ï¼‰å’Œç£ç›˜ç¼“å­˜è¿›ä¸€æ­¥æå‡è®¿é—®é€Ÿåº¦ï¼Œå®é™…ä½“éªŒæ•ˆæœæ˜¯æä½³çš„ã€‚</p>
<p>æˆ‘ä»¬çš„é¡µé¢å­˜åœ¨ç€å¤§é‡çš„äº‹ä»¶ç›‘å¬å¤„ç†ã€‚ä¸å·§çš„æ˜¯åœ¨æ›¿æ¢å†…å®¹æ—¶ï¼Œä¼šå‘ç”Ÿéƒ¨åˆ†äº‹ä»¶ç›‘å¬ä¸¢å¤±äº†ï¼Œå¼‚å¸¸ã€é”™è¯¯ã€åŠŸèƒ½å¤±æ•ˆç­‰ç­‰ã€‚</p>
<p>Javascript éƒ¨åˆ†è‡ªç„¶æ˜¯éœ€è¦é‡æ–°ç»‘å®šæ³¨å†Œçš„ï¼Œä½†ä¹Ÿä¸èƒ½æ— è„‘å…¨éƒ¨é‡æ–°ç»‘å®š, å¦åˆ™ä¼šå¯¼è‡´<strong>é‡å¤äº‹ä»¶ç›‘å¬</strong>ï¼Œå®ƒæˆ–è®¸ä¸ä¼šç«‹å³çˆ†å‘å±å®³ï¼Œä½†æ˜¯éšç€æµè§ˆé¡µé¢çš„å¢åŠ ï¼Œäº‹ä»¶ç»‘å®šå¯èƒ½ä¼šè¶Šæ¥è¶Šç´¯åŠ ï¼Œå½±å“æ•ˆç‡ï¼Œæ½œåœ¨é€ æˆé”™è¯¯ç­‰ç­‰ã€‚æ‰€ä»¥è¿™é‡Œå°±éœ€è¦åˆ©ç”¨ <code>send</code> å’Œ <code>complete</code> è¿™å¯¹äº‹ä»¶äº†ï¼Œåˆç†åˆ©ç”¨ï¼Œæ­£ç¡®è§£å†³é—®é¢˜ã€‚</p>
<p>æ¯”å¦‚, å¼€å¯æˆ‘çš„åšå®¢å¼€å¯<em>Pjax</em>å±æ€§, åšå®¢ä¼šå±€éƒ¨åˆ·æ–°äº†, åŠ è½½é€Ÿåº¦ä¹Ÿå˜å¿«äº†, æˆ‘çš„éŸ³ä¹æ’­æ”¾å™¨å¯ä»¥å…¨å±€æ’­æ”¾äº†,  ä½†æ˜¯æ¯ä¸ªé¡µé¢çš„è¯„è®ºæ¶ˆæ¯é”™ä¹±äº†æˆ–æ¶ˆå¤±äº†, åªæœ‰<code>command + r</code>åˆ·æ–°æ•´ä¸ªé¡µé¢, æ‰èƒ½åŠ è½½å‡ºæ¥ã€‚</p>
<p>è§£å†³, åœ¨<code>/themes/next/layout/_scripts/pjax.swig</code>ç›®å½•ä¸‹, æ ¹æ®è¿™äº›å‡½æ•°é‡æ–°è°ƒç”¨åŠ è½½<strong>æ‹‰å–è¯„è®º</strong>çš„æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:send&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:complete&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:error&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºä»¥ååšå®¢çš„æ’ä»¶è¶Šæ¥è¶Šå¤š(æœç´¢ã€è¯„è®ºã€æ‡’åŠ è½½ã€å›¾ç‰‡å¼¹å‡ºå±‚ã€ä»£ç å¤åˆ¶ã€èƒŒæ™¯å¹»ç¯ç‰‡ã€éŸ³ä¹æ’­æ”¾å™¨ã€æŒ‰é’®æ¶Ÿæ¼ªåŠ¨ç”»ã€é¡µé¢å¹³æ»‘æ»šåŠ¨ã€å…¬å¼ã€ä¸è’œå­è®¡æ•°ã€ç½‘å€é¢„åŠ è½½),  è¿™å…¶ä¸­ï¼Œæœ‰äº›æ— éœ€å¤„ç†ï¼Œæœ‰äº›ç®€å•çš„å°è£…æˆå‡½æ•°é‡æ–°è°ƒç”¨ä¸€ä¸‹å³å¯ï¼Œè€Œæœ‰äº›åˆ™å°±éœ€è¦ç‰¹æ„åˆ†æå¤„ç†äº†ã€‚</p>
<p>å› æ­¤æš‚æ—¶å°†è¯¥åŠŸèƒ½å…ˆå…³é—­æ‰äº†</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><span class="exturl" data-url="aHR0cHM6Ly9xaWFubGluZy5wdy9oZXhvLW9wdGltaXphdGlvbi8=">Hexoä¼˜åŒ–æ±‡æ€»<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZ2VtaW5pbGlnaHQuY24vMjAyMC8wOC8xNi9TVCUyMC0lMjAlRTglQkQlQUYlRTQlQkIlQjYlRTUlQjclQTUlRTUlODUlQjcvc3QtaGV4by1uZXh0LWN1c3RvbS8=">æ·±åº¦ç¾åŒ–å’Œå®šåˆ¶Hexoå’ŒNexTæ–¹æ³•<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xNDk3MTAxOTE=">ä¸º Hexo åšå®¢æ›´æ¢ä¸»é¢˜<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9pbmtzcy5jbi9ibG9nLzgwYjVmMjM1Lw==">Hexoåšå®¢éƒ¨ç½²Pjaxå±€éƒ¨åˆ·æ–°<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9pY2FydXMuaGNsb25lbHkuY29tL3Bvc3RzLzQwOWQzMDkwLw==">Valineæ·»åŠ åšä¸»æ ‡ç­¾åŠè¯„è®ºå¾®ä¿¡ã€QQé€šçŸ¥<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmhjbG9uZWx5LmNvbS8=">hclonely blog<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
        <tag>Hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–åˆæ¢</title>
    <url>/2020/04/02/optimize-compilation-speed/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç¨å¾®è°ƒç ”ä¸‹ä¼˜åŒ–ç¼–è¯‘æ—¶é•¿, é™¤ç¡¬ä»¶è®¾å¤‡å’ŒXcodeä¸€äº›ç¼–è¯‘é…ç½®é¡¹å¤–, å¤§ä½“æœ‰ä»¥ä¸‹ğŸ‘‡å‡ ç§æ–¹æ¡ˆ:</p>
<span id="more"></span>


<h2 id="ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–"><a href="#ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–" class="headerlink" title="ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–"></a>ç¼–è¯‘é€Ÿåº¦ä¼˜åŒ–</h2><h3 id="ç¼“å­˜ç¼–è¯‘äº§ç‰©"><a href="#ç¼“å­˜ç¼–è¯‘äº§ç‰©" class="headerlink" title="ç¼“å­˜ç¼–è¯‘äº§ç‰©"></a>ç¼“å­˜ç¼–è¯‘äº§ç‰©</h3><h4 id="CCache"><a href="#CCache" class="headerlink" title="CCache"></a>CCache</h4><blockquote>
<p>æŠŠç¼–è¯‘çš„ä¸­é—´äº§ç‰©ç¼“å­˜èµ·æ¥çš„å·¥å…·, <span class="exturl" data-url="aHR0cDovL2xpbmsuemhpaHUuY29tLz90YXJnZXQ9aHR0cHM6Ly9wc3BkZmtpdC5jb20vYmxvZy8yMDE1L2NjYWNoZS1mb3ItZnVuLWFuZC1wcm9maXQv">Using ccache for Fun and Profit | Inside PSPDFKit<i class="fa fa-external-link-alt"></i></span>, ä½¿ç”¨ç®€å•</p>
</blockquote>
<p>ç¼ºç‚¹: ä¸æ”¯æŒ Clang Modulesã€PCH, Swift</p>
<h4 id="Buck-amp-Bazel"><a href="#Buck-amp-Bazel" class="headerlink" title="Buck &amp; Bazel"></a>Buck &amp; Bazel</h4><blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC9idWNrYnVpbGQuY29t">Buck<i class="fa fa-external-link-alt"></i></span> æ˜¯Facebook å¼€æº, <span class="exturl" data-url="aHR0cDovL2xpbmsuemhpaHUuY29tLz90YXJnZXQ9aHR0cHM6Ly9iYXplbC5idWlsZC8=">Bazel<i class="fa fa-external-link-alt"></i></span>æ˜¯Google å¼€æº, å®ƒä»¬èƒ½æ™ºèƒ½çš„å¢é‡ç¼–è¯‘, è¿›è€Œæé«˜æ„å»ºé€Ÿåº¦, ä¹‹å‰ç”¨åœ¨å®‰å“, å·²ç»é€‚é…äº†iOS.</p>
</blockquote>
<p>ä¼˜ç‚¹: </p>
<ol>
<li>ç¼“å­˜äº†ç¼–è¯‘ç»“æœï¼Œé€šè¿‡æŒç»­ç›‘è§†é¡¹ç›®ç›®å½•çš„æ–‡ä»¶å˜åŒ–ï¼Œæ¯æ¬¡ç¼–è¯‘æ—¶åªç¼–è¯‘æœ‰æ”¹åŠ¨çš„æ–‡ä»¶ã€‚ </li>
<li>é€šè¿‡ä¸€å°ç¼“å­˜æ–‡ä»¶æœåŠ¡å™¨æ¥ä¿å­˜å¤§å®¶çš„ç¼–è¯‘ç»“æœï¼Œåªè¦å›¢é˜Ÿé‡Œå…¶ä¸­ä¸€äººç¼–è¯‘è¿‡çš„æ–‡ä»¶ï¼Œå…¶ä»–äººå°±ä¸ç”¨å†ç¼–è¯‘äº†ï¼Œç›´æ¥ä¸‹è½½å°±è¡Œã€‚</li>
</ol>
<p>ç¼ºç‚¹: </p>
<ol>
<li>å› ä¸ºç”±<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC9idWNrYnVpbGQuY29t">Buck<i class="fa fa-external-link-alt"></i></span>æ¥ç®¡äº†é¡¹ç›®ç¼–è¯‘çš„è¿‡ç¨‹, æ‰€ä»¥é¡¹ç›®è¿›è¡Œå¤§å¹…åº¦è°ƒæ•´</li>
</ol>
<blockquote>
<p>è¿™ä¸ªæ–¹æ¡ˆä¸é”™, å¯ä»¥è¿›è¡Œå‚è€ƒ, å¬è¯´æˆ‘ä»¬çš„å®‰å“å›¢é˜Ÿå°ä¼™ä¼´å°±æ˜¯é€šè¿‡è„šæœ¬æ¥è¿›è¡Œç›‘å¬é¡¹ç›®æ–‡ä»¶å˜åŒ–, æ¥è¿›è¡Œå¢é‡ç¼–è¯‘, åç»­å¯ä»¥å»å–ç»~</p>
</blockquote>
<h3 id="åˆ†å¸ƒå¼ç¼–è¯‘"><a href="#åˆ†å¸ƒå¼ç¼–è¯‘" class="headerlink" title="åˆ†å¸ƒå¼ç¼–è¯‘"></a>åˆ†å¸ƒå¼ç¼–è¯‘</h3><blockquote>
<p>æŠŠç¼–è¯‘ä»»åŠ¡åˆ†æ´¾åˆ°å†…ç½‘çš„å¤šå°æœåŠ¡å™¨ä¸Šï¼ŒæœåŠ¡å™¨ç¼–è¯‘å®ŒæˆåæŠŠç¼–è¯‘äº§ç‰©ä¼ å›æ¥ã€‚æ¯”è¾ƒå‡ºåçš„æ˜¯<code>distcc</code>ã€‚</p>
</blockquote>
<p>è¿™ç§æ–¹æ¡ˆæ²¡æœ‰æ·±å…¥è°ƒç ”ã€‚</p>
<h3 id="ç»„ä»¶äºŒè¿›åˆ¶åŒ–"><a href="#ç»„ä»¶äºŒè¿›åˆ¶åŒ–" class="headerlink" title="ç»„ä»¶äºŒè¿›åˆ¶åŒ–"></a>ç»„ä»¶äºŒè¿›åˆ¶åŒ–</h3><h4 id="å¹³æ»‘ç»„ä»¶åº“æ”¹é€ "><a href="#å¹³æ»‘ç»„ä»¶åº“æ”¹é€ " class="headerlink" title="å¹³æ»‘ç»„ä»¶åº“æ”¹é€ "></a>å¹³æ»‘ç»„ä»¶åº“æ”¹é€ </h4><blockquote>
<p>é€šè¿‡å¼•å…¥å˜é‡çš„æ–¹å¼, åœ¨podspecæ–‡ä»¶ä¸­è¿›è¡Œåˆ¤æ–­æ˜¯ä½¿ç”¨æºç è¿˜æ˜¯äºŒè¿›åˆ¶çš„source</p>
</blockquote>
<p>ç¼ºç‚¹: éœ€è¦ä¸€ä¸ªä¸€ä¸ªåº“çš„æ”¹é€ , ä¸”podspecçš„åº“ç‰ˆæœ¬æ˜¯ä½¿ç”¨jsonæ ¼å¼æ¥è¿›è¡Œç¼“å­˜çš„, å¼•å…¥å˜é‡ä¸çŸ¥æ˜¯å¦ä¼šæœ‰é—®é¢˜</p>
<h4 id="Carthage"><a href="#Carthage" class="headerlink" title="Carthage"></a>Carthage</h4><blockquote>
<p>Carthageå¯ä»¥å°†ä¸€éƒ¨åˆ†ä¸å¸¸å˜çš„åº“æ‰“åŒ…æˆframeworkï¼Œå¯ä»¥æ¯”è¾ƒæ–¹ä¾¿åœ°è°ƒè¯•æºç , ä½†æ˜¯å¯¹äºé¡¹ç›®çš„æ”¹åŠ¨è¾ƒå¤§</p>
</blockquote>
<h4 id="cocoapods-packager"><a href="#cocoapods-packager" class="headerlink" title="cocoapods-packager"></a>cocoapods-packager</h4><blockquote>
<p>ä»…éœ€è¦é€šè¿‡podspecæ–‡ä»¶, åœ¨linté€šè¿‡åå°±å¯ä»¥å°†podæ‰“åŒ…æˆStatic Libraryã€‚ä½†æ˜¯æœ‰å¾ˆé•¿æ—¶é—´æ²¡æœ‰æ›´æ–°äº†ã€‚</p>
</blockquote>
<h4 id="cocoapods-binary"><a href="#cocoapods-binary" class="headerlink" title="cocoapods-binary"></a>cocoapods-binary</h4><blockquote>
<p> åŸç†æ˜¯é€šè¿‡ CocoaPods æä¾›çš„ pre_install hook åœ¨ pod install çš„ prepare é˜¶æ®µæ‹¦æˆªåˆ°å½“å‰çš„ pod install contextï¼Œè¿›è€Œ fork å‡ºä¸€ä»½ç‹¬ç«‹çš„ installer ä»¥å®Œæˆå°†é¢„ç¼–è¯‘æºç  clone è‡³ Pod/_Prebuild ç›®å½•ä¸‹ã€‚</p>
</blockquote>
<p>ä½¿ç”¨å¾ˆç®€å•, è¯•ç”¨äº†ä¸€ä¸‹: </p>
<p>ä¼šæ‹–æ…¢pod installé€Ÿåº¦, æºç åˆ‡æ¢è°ƒè¯•å, ç¼“å­˜ä¼šè¢«æ¸…ç†, éœ€è¦é‡æ–°ç¼–è¯‘ã€‚è¿™ä¸ªå¯¹äºé¡¹ç›®ç¬¬ä¸€æ¬¡ç¼–è¯‘æ¥è¯´æ²¡æœ‰ä»»ä½•ä½œç”¨,  è€Œæ‰“åŒ…ç­‰åœºæ™¯æ›´å¤šçš„æ˜¯ä¼˜åŒ–ç¬¬ä¸€æ¬¡çš„ç¼–è¯‘é€Ÿåº¦</p>
<h4 id="cocoapods-bin-amp-cocoapods-imy-bin"><a href="#cocoapods-bin-amp-cocoapods-imy-bin" class="headerlink" title="cocoapods-bin &amp; cocoapods-imy-bin"></a>cocoapods-bin &amp; cocoapods-imy-bin</h4><blockquote>
<p> <code>cocoapods-imy-bin</code>ç®—æ˜¯<code>cocoapods-bin</code>çš„å¼ºåŒ–ç‰ˆ, å¢æ·»äº†å¾ˆå¤šåŠŸèƒ½, æ€»ä½“é€‚ç”¨ä¸‹æ¥ä¾µå…¥æ€§ä½, åŠŸèƒ½æ¯”è¾ƒå…¨ã€‚</p>
</blockquote>
<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><blockquote>
<p>å¦‚æœé€‰ç”¨äºŒè¿›åˆ¶åŒ–æ–¹æ¡ˆ, å¯ä»¥é¢„è§æ€§çš„ä¸€äº›é—®é¢˜æœ‰ä¸€ä¸‹å‡ ç‚¹: </p>
</blockquote>
<ol>
<li><p>å•ç§æœ‰æº, æ²¡æœ‰æœåŠ¡ç«¯ç¼“å­˜çš„ä¸å¯å–, å¯¹äºç¬¬ä¸€æ¬¡ç¼–è¯‘æ²¡æœ‰æ•ˆæœ</p>
</li>
<li><p>æˆ‘ä»¬æœ‰å¤šç§æ–¹å¼ç”Ÿæˆé™æ€åº“,  åœ¨ä½¿ç”¨æœåŠ¡ç«¯ç¼“å­˜æ—¶, ä¸€å®šä¸è¦ä½¿ç”¨Gitæ¥ç®¡ç†äºŒè¿›åˆ¶æ–‡ä»¶, ä¼šæ‹–æ…¢Gitæ‹‰å–çš„é€Ÿåº¦, æ¯•ç«ŸGitçš„ç¼“å­˜æœºåˆ¶æ¥è¯´æ˜¯ä¸èƒ½ç®¡ç†å¤§æ–‡ä»¶çš„, æ¨èé™æ€æœåŠ¡å™¨ã€‚</p>
</li>
</ol>
<h3 id="å®Œå–„å¤´æ–‡ä»¶çš„æœç´¢æœºåˆ¶"><a href="#å®Œå–„å¤´æ–‡ä»¶çš„æœç´¢æœºåˆ¶" class="headerlink" title="å®Œå–„å¤´æ–‡ä»¶çš„æœç´¢æœºåˆ¶"></a>å®Œå–„å¤´æ–‡ä»¶çš„æœç´¢æœºåˆ¶</h3><blockquote>
<p>1: cocoapods-hmap-prebuilt æ˜¯ç¾å›¢ä¸€æ¬¾ cocoapods æ’ä»¶ï¼Œä»¥ <span class="exturl" data-url="aHR0cHM6Ly9jbGFuZy5sbHZtLm9yZy9kb3h5Z2VuL2NsYXNzY2xhbmdfMV8xSGVhZGVyTWFwLmh0bWw=">Header Map æŠ€æœ¯<i class="fa fa-external-link-alt"></i></span> ä¸ºåŸºç¡€ï¼Œæå‡ä»£ç çš„ç¼–è¯‘é€Ÿåº¦ï¼Œå®Œå–„å¤´æ–‡ä»¶çš„æœç´¢æœºåˆ¶ã€‚</p>
<p>2: Clang Module</p>
</blockquote>
<p>æœªå°è¯•, ç¾å›¢æ–‡ç« ä¸­æä¾›çš„cocoapods-hmap-prebuiltçš„sourceæ— æ³•è®¿é—®, ä¸‹è½½ä¸äº†gem</p>
<p>ä¸è¿‡åŸç†å·²ç»å‘Šè¯‰äº†æˆ‘ä»¬, ä¹Ÿæ˜¯ä¸€ç§åŠªåŠ›çš„æ–¹å‘</p>
<h2 id="Rubyå·¥å…·é“¾"><a href="#Rubyå·¥å…·é“¾" class="headerlink" title="Rubyå·¥å…·é“¾"></a>Rubyå·¥å…·é“¾</h2><p>ç›®å‰æµè¡Œçš„ Ruby ç¯å¢ƒç®¡ç†å·¥å…·æœ‰ RVM å’Œ rbenvã€‚æˆ‘ä»¬ä½¿ç”¨é‚£ä¸€ç§éƒ½å¯ä»¥, RVMè¾ƒé‡, rbenvè½»é‡çº§ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸¤ä¸ªå·¥å…·æ˜¯ä¸å…¼å®¹çš„, æˆ‘ä»¬åªèƒ½é€‰æ‹©å…¶ä¸€, å³åœ¨æœç´¢rubyçš„sdkæ—¶, åªæœ‰ä¸€ä¸ªæ˜¯å¯è§çš„ã€‚</p>
<p>ä¸¤ä¸ªçš„å®‰è£…å’Œä½¿ç”¨è¿™é‡Œä¸åœ¨èµ˜è¿°, ä¸‹é¢ä¸ºå®˜æ–¹æ–‡æ¡£: </p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ydWJ5LWNoaW5hLm9yZy93aWtpL3J2bS1ndWlkZQ==">RVMå®ç”¨æŒ‡å—<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ydWJ5LWNoaW5hLm9yZy93aWtpL3J2bS1ndWlkZQ==">rbenvå®ç”¨æŒ‡å—<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="ç¼–å†™cocoapodsæ’ä»¶"><a href="#ç¼–å†™cocoapodsæ’ä»¶" class="headerlink" title="ç¼–å†™cocoapodsæ’ä»¶"></a>ç¼–å†™cocoapodsæ’ä»¶</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NvY29hUG9kcy9jb2NvYXBvZHMtcGx1Z2lucw==">cocoapods-pluginsæ–‡æ¡£<i class="fa fa-external-link-alt"></i></span></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">// å®‰è£…</span><br><span class="line">gem install cocoapods<span class="literal">-plugins</span></span><br><span class="line">// åˆ›å»º</span><br><span class="line">pod plugins create NAME [<span class="type">TEMPLATE_URL</span>]</span><br><span class="line">// eg:</span><br><span class="line">pod plugins create author</span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ç”¨: </p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹å®‰è£…è¿‡çš„æ’ä»¶</span><br><span class="line">pod plugins installed</span><br><span class="line">// æŸ¥çœ‹å·²çŸ¥çš„æ’ä»¶</span><br><span class="line">pod plugins list</span><br><span class="line">// æŸ¥æ‰¾æ’ä»¶</span><br><span class="line">pod plugins search QUERY</span><br><span class="line">// å‘å¸ƒè‡ªå·±çš„æ’ä»¶</span><br><span class="line">pod plugins publish</span><br></pre></td></tr></table></figure>

<p>ç›®å½•ç»“æ„:</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Gemfile</span><br><span class="line">â”œâ”€â”€ LICENSE.txt</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ Rakefile</span><br><span class="line">â”œâ”€â”€ cocoapods<span class="literal">-author</span>.gemspec</span><br><span class="line">â”œâ”€â”€ lib</span><br><span class="line">â”‚   â”œâ”€â”€ cocoapods<span class="literal">-author</span></span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ command</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ author.rb</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ command.rb</span><br><span class="line">â”‚   â”‚   â””â”€â”€ gem_version.rb</span><br><span class="line">â”‚   â”œâ”€â”€ cocoapods<span class="literal">-author</span>.rb</span><br><span class="line">â”‚   â””â”€â”€ cocoapods_plugin.rb</span><br><span class="line">â””â”€â”€ spec</span><br><span class="line">    â”œâ”€â”€ command</span><br><span class="line">    â”‚   â””â”€â”€ author_spec.rb</span><br><span class="line">    â””â”€â”€ spec_helper.rb</span><br></pre></td></tr></table></figure>

<p>è§£æauthor.rbçš„å†…å®¹</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">Pod</span></span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Command</span></span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Author</span> &lt; Command</span></span><br><span class="line">      <span class="comment"># pod plugins list æ—¶ï¼Œå±•ç¤ºçš„æ¦‚è¦ä¿¡æ¯</span></span><br><span class="line">      <span class="keyword">self</span>.summary = <span class="string">&#x27;Short description of cocoapods-author.&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># --help / å‘½ä»¤é”™è¯¯æ—¶å±•ç¤ºçš„æè¿°ä¿¡æ¯</span></span><br><span class="line">      <span class="keyword">self</span>.description = &lt;&lt;-DESC</span><br><span class="line">        Longer description of cocoapods-author.</span><br><span class="line">      DESC</span><br><span class="line"></span><br><span class="line">      <span class="comment"># --help / å‘½ä»¤é”™è¯¯æ—¶å±•ç¤ºçš„å‚æ•°ä¿¡æ¯</span></span><br><span class="line">      <span class="keyword">self</span>.arguments = <span class="string">&#x27;NAME&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(argv)</span></span></span><br><span class="line">        <span class="variable">@name</span> = argv.shift_argument</span><br><span class="line">        <span class="keyword">super</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># æ ¡éªŒæ–¹æ³•ï¼ˆæŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ç­‰ï¼‰</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">validate!</span></span></span><br><span class="line">        <span class="keyword">super</span></span><br><span class="line">        help! <span class="string">&#x27;A Pod name is required.&#x27;</span> <span class="keyword">unless</span> @name</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># è¿è¡Œå‘½ä»¤</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">run</span></span></span><br><span class="line">        UI.puts <span class="string">&quot;Add your implementation for the cocoapods-author plugin in <span class="subst">#&#123;<span class="keyword">__FILE__</span>&#125;</span>&quot;</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>



<h2 id="RubyMineè°ƒè¯•cocoapodsæ’ä»¶"><a href="#RubyMineè°ƒè¯•cocoapodsæ’ä»¶" class="headerlink" title="RubyMineè°ƒè¯•cocoapodsæ’ä»¶"></a>RubyMineè°ƒè¯•cocoapodsæ’ä»¶</h2><p><strong>RubyMine</strong>æ˜¯ä¸€ä¸ªRubyçš„IDEå¼€å‘å·¥å…·, å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>VSCode</strong>æ¥è¿›è¡Œè°ƒè¯•å’Œå¼€å‘</p>
<p>RubyMineæ˜¯ä¸€ä¸ªå¯ä»¥å…è´¹ä½¿ç”¨30å¤©çš„æ”¶è´¹è½¯ä»¶,  è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ç ´è§£ç‰ˆæœ¬</p>
<h3 id="å‡†å¤‡æºç "><a href="#å‡†å¤‡æºç " class="headerlink" title="å‡†å¤‡æºç "></a>å‡†å¤‡æºç </h3><p>æˆ‘ä»¬å¯ä»¥è°ƒè¯•ä»»æ„çš„cocoapodsæ’ä»¶, æˆ‘ä»¬ä»¥<code>cocoapods-imy-bin</code>ä¸ºä¾‹, ``cocoapods-imy-bin<code>æ˜¯ä¸€æ¬¾å¯ä»¥ä½¿æºç åº“è½¬æ¢ä¸ºäºŒè¿›åˆ¶çš„æ’ä»¶, æ˜¯</code>cocoapods-bin`çš„å¼ºåŒ–ç‰ˆæœ¬</p>
<p>åˆ›å»ºç›®å½•<code>imy-bin</code>:</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">imy<span class="literal">-bin</span></span><br><span class="line">â”œâ”€â”€ Gemfile <span class="comment">#bundleçš„ä¾èµ–æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ cocoapods<span class="literal">-imy</span><span class="literal">-bin</span> <span class="comment">#æ’ä»¶çš„æºç </span></span><br><span class="line">â”œâ”€â”€ PodDemo <span class="comment">#è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªéšä¾¿ç”¨xcodeå»ºç«‹çš„iOSçš„ä½¿ç”¨podfileçš„demoå·¥ç¨‹</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­<code>Gemfile</code>ä¸­çš„å†…å®¹ä¸º: </p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å›½å†…çš„æºæ¯”è¾ƒå¿«</span></span><br><span class="line"><span class="comment">#source &#x27;https://rubygems.org&#x27;</span></span><br><span class="line">source <span class="string">&#x27;https://gems.ruby-china.com&#x27;</span></span><br><span class="line"></span><br><span class="line">gem <span class="string">&#x27;cocoapods-imy-bin&#x27;</span> , <span class="symbol">:path</span> =&gt; <span class="string">&quot;./cocoapods-imy-bin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‹é¢çš„ä»£ç ä¸ç”¨å†™,å› ä¸ºRubyMineåœ¨è°ƒè¯•æ—¶,ä¼šè‡ªåŠ¨å®‰è£…è¿™äº›gem, å¦‚æœæ˜¯vscodeè°ƒè¯•çš„è¯, éœ€è¦å®‰è£…gem</span></span><br><span class="line">group <span class="symbol">:debug</span> <span class="keyword">do</span></span><br><span class="line">    gem <span class="string">&#x27;ruby-debug-ide&#x27;</span></span><br><span class="line">    gem <span class="string">&#x27;debase&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>



<h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><p>åœ¨å½“å‰ç›®å½•ä¸‹å»ºç«‹<code>./bundle/config</code>æ–‡ä»¶, <code>config</code>å†…å®¹å¦‚ä¸‹: </p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">BUNDLE_PATH: <span class="string">&quot;vendor/bundle&quot;</span></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ bundle install, å°†ä¼šæŠŠGemfileæ–‡ä»¶ä¸­æ‰€ç”³æ˜çš„ä¾èµ–éƒ½å®‰è£…åˆ°vendor/bundleç›®å½•ä¸‹</p>
<p>å› ä¸ºæˆ‘ä»¬æ˜¯è°ƒè¯•æŸä¸ªgemåº“, ä¸ºäº†ä¸å½±å“æˆ‘ä»¬å·²ç»å®‰è£…çš„, å®‰è£…ä¾èµ–çš„æ—¶å€™, æœ€å¥½æ˜¯å®‰è£…åˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰§è¡Œç›®å½•ä¸­å», bundleä¼šæ£€æŸ¥, å¦‚æœé…ç½®äº†<code>config</code>æ–‡ä»¶çš„è¯, æ˜¯å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å£°æ˜å®‰è£…çš„ç›®å½•çš„ã€‚</p>
<p>è€Œä¸”ä¸æŒ‡å®šå®‰è£…åˆ°å½“å‰ç›®å½•, ä¼šå†™å…¥åˆ°rubyç¯å¢ƒæ‰€åœ¨æ–‡ä»¶, æˆ‘ä»¬ç³»ç»Ÿæœ‰å¯èƒ½æ²¡æœ‰å†™å…¥æƒé™, è¿›è€ŒæŠ¥é”™ã€‚</p>
<p>åˆ›å»ºæ–‡ä»¶å®Œæˆå, æˆ‘ä»¬åœ¨åœ¨å‰ç›®å½•æ‰§è¡Œ<code>bundle install</code>, å°†ä¾èµ–å®‰è£…è¿›<code>vendor/bundle</code>ä¸­</p>
<p>æ­¤æ—¶çš„ç›®å½•ç»“æ„ä¸º: </p>
<img src="/2020/04/02/optimize-compilation-speed/rubymine_folder.png" class="" title="ç›®å½•ç»“æ„">

<h3 id="RubyMineè®¾ç½®"><a href="#RubyMineè®¾ç½®" class="headerlink" title="RubyMineè®¾ç½®"></a>RubyMineè®¾ç½®</h3><p>RubyMineæ‰“å¼€<code>imy-bin</code>æ–‡ä»¶å¤¹, è®¾ç½®<code>Edit Configurations</code></p>
<img src="/2020/04/02/optimize-compilation-speed/rubymine_gem_config.png" class="" title="é…ç½®config">
<img src="/2020/04/02/optimize-compilation-speed/rubymine_gem_bundler.png" class="" title="é…ç½®bundler">

<h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>æˆ‘ä»¬æ‰¾åˆ°<code>cocoapods-imy-bin</code>æ’ä»¶çš„ä¸­å‘½ä»¤<code>pod bin init</code>çš„å‡½æ•°å…¥å£, æ‰“æ–­ç‚¹ã€‚</p>
<p>ç‚¹å‡»å°çˆ¬è™«, è¿›è¡Œè°ƒè¯•: </p>
<img src="/2020/04/02/optimize-compilation-speed/rubymine_breakpoint.png" class="" title="æ–­ç‚¹">


<p>è‡³æ­¤, æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è°ƒè¯•, ç„¶åçœ‹çœ‹<code>cocoapods-imy-bin</code>ä½œè€…çš„å®ç°æ€è·¯ä»¥åŠæ¯ä¸€ä¸ªå‘½ä»¤çš„éƒ½åšäº†å“ªäº›äº‹æƒ…~</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8xODViMWViNTY4N2I=">rubymineè°ƒè¯•cocoapodsæ’ä»¶<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly90cmlwbGVjYy5naXRodWIuaW8vMjAxNy8xMS8wOC8yMDE3LTExLTA4LWNodWFuZy1qaWFuLWNvY29hcG9kc2NoYS1qaWFuLw==">ç¼–å†™è‡ªå·±çš„ CocoaPods æ’ä»¶<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘</tag>
        <tag>Cocoapods</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹´åå¼€å·¥</title>
    <url>/2018/02/25/start/</url>
    <content><![CDATA[<h2 id="æ–°åšå®¢"><a href="#æ–°åšå®¢" class="headerlink" title="æ–°åšå®¢"></a>æ–°åšå®¢</h2><p>ä»¥ååœ¨è¿™é‡Œæ›´æ–°åšå®¢äº†, åœ¨è¿™é‡Œè®°å½•ä¸€äº›å¼€å‘ç»éªŒå’Œä¸€äº›ç”Ÿæ´»ç‚¹æ»´, ä»¥å‰çš„æ–‡ç« ç‚¹å‡»<span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vdS9jNGE0NTA1YmVmNGY=">è¿™é‡Œ<i class="fa fa-external-link-alt"></i></span>, æ©, å°±é…±â€¦</p>
<span id="more"></span>

<h2 id="æ–°Mac"><a href="#æ–°Mac" class="headerlink" title="æ–°Mac"></a>æ–°Mac</h2><p>å¹´å‡é©¬ä¸Šè¿‡å»äº†, å¹´åå¼€å·¥, ä¹°å°æ–°ç”µè„‘çŠ’åŠ³ä¸€ä¸‹è‡ªå·±. <code>2w</code>å¤§æ´‹, è‚‰ç–¼~~<br>ä¸å¤šè¯´, èµ¶ç´§é…ç½®èµ·æ¥ ^_^</p>
<h2 id="å®‰è£…å¿…å¤‡è½¯ä»¶"><a href="#å®‰è£…å¿…å¤‡è½¯ä»¶" class="headerlink" title="å®‰è£…å¿…å¤‡è½¯ä»¶"></a>å®‰è£…å¿…å¤‡è½¯ä»¶</h2><ol>
<li><p>è¾“å…¥æ³•: æœç‹—è¾“å…¥æ³•</p>
</li>
<li><p>Shadowsocks-NG</p>
<blockquote>
<p>è¿™ä¸ªä¸å¤šè¯´, å¿…å¤‡</p>
</blockquote>
</li>
<li><p>Chromeæµè§ˆå™¨ </p>
<blockquote>
<p>å®‰è£…<code>JSON Viewer</code>æ’ä»¶, jsonæ ¼å¼åŒ–å·¥å…·</p>
</blockquote>
</li>
<li><p>Alfred3 </p>
<blockquote>
<p>æ•ˆç‡ç¥å™¨ é…ç½®æ‰€åœ¨çš„è·¯å¾„<code>~/Library/Application Support/Alfred 2/Alfred.alfredpreferences</code>, ä»è€ç”µè„‘æ‹·è´åˆ°æ–°ç”µè„‘<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzM5MDk4Nzk5">Alfredåœ¨ä¸åŒç”µè„‘ä¸ŠåŒæ­¥è‡ªå®šä¹‰è®¾ç½®<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
</li>
<li><p>iTerm </p>
<blockquote>
<p>é…åˆ<code>ZSH</code> ä¸ªæ€§åŒ–è®¾ç½®</p>
</blockquote>
</li>
<li><p>CleanMyMac 3</p>
<blockquote>
<p>æ¸…ç†MAC</p>
</blockquote>
</li>
<li><p>Teamviewer</p>
<blockquote>
<p>è¿œç¨‹ååŠ©</p>
</blockquote>
</li>
<li><p>Charles</p>
<blockquote>
<p>æŠ“åŒ…å·¥å…·</p>
</blockquote>
</li>
<li><p>Sketch</p>
<blockquote>
<p>UIè®¾è®¡å¿…å¤‡</p>
</blockquote>
</li>
<li><p>Xcode</p>
<blockquote>
<p>iOSå¼€å‘å¿…å¤‡</p>
</blockquote>
</li>
<li><p>å¾®ä¿¡å¼€å‘è€…å·¥å…· </p>
</li>
<li><p>Sourcetree</p>
<blockquote>
<p>gitå¯è§†åŒ–å·¥å…· </p>
</blockquote>
</li>
<li><p>Phpstorm <span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdm9rZV8vYXJ0aWNsZS9kZXRhaWxzLzc4Nzk0NTY3">æ¿€æ´»<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>Reveal</p>
<blockquote>
<p>iPhone app å±‚çº§æŸ¥çœ‹</p>
</blockquote>
</li>
<li><p>Mweb </p>
<blockquote>
<p>å¿ƒä»ªçš„<code>Markdown</code>ç¼–è¾‘å™¨</p>
</blockquote>
</li>
<li><p>Sequel Pro </p>
<blockquote>
<p>æ•°æ®åº“å·¥å…·</p>
</blockquote>
</li>
<li><p>LICEcap /  Snip</p>
</li>
<li><p>ThemeEngine </p>
<blockquote>
<p>æå–iOS assets.carä¸­çš„å›¾ç‰‡</p>
</blockquote>
</li>
<li><p>PaintCode </p>
</li>
<li><p>XMind</p>
</li>
<li><p>(Be Focused Pro)ç•ªèŒ„é—¹é’Ÿ</p>
</li>
<li><p>WWDC</p>
</li>
<li><p>å°è±¡ç¬”è®°</p>
</li>
<li><p>æ’­æ”¾å™¨ Blu-ray Player Pro</p>
</li>
<li><p>Dropbox é…ç½®ä»£ç†æœåŠ¡å™¨</p>
</li>
</ol>
<h2 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h2><ol>
<li><p>é…ç½®SSH <span class="exturl" data-url="aHR0cDovL3d3dy5jbmJsb2dzLmNvbS9heXNlZWluZy9wLzQ2NDYyOTIuaHRtbA==">å¤šå°ç”µè„‘å…¬ç”¨ä¸€ä¸ªSSH<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>æ‹·è´æ—§ç”µè„‘çš„ .ssh åˆ°æ–°ç”µè„‘ä¸­</p>
</blockquote>
</li>
<li><p>å®‰è£…<code>Homebrew</code>å’Œ<code>wget</code> <span class="exturl" data-url="aHR0cHM6Ly9icmV3LnNoLw==">æ­¥éª¤<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>å®‰è£…<code>npm</code> <span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tLmNuL2dldHRpbmctc3RhcnRlZC9pbnN0YWxsaW5nLW5vZGUv">æ­¥éª¤<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>å®‰è£…<code>mysql</code> <span class="exturl" data-url="aHR0cHM6Ly9kZXYubXlzcWwuY29tL2Rvd25sb2Fkcy9teXNxbC8=">dmgå®‰è£…<i class="fa fa-external-link-alt"></i></span> / <span class="exturl" data-url="aHR0cHM6Ly9hYWFhYWFzaHUuZ2l0Ym9va3MuaW8vbWFjLWRldi1zZXR1cC9jb250ZW50L015U3FsL2luZGV4Lmh0bWw=">brewå®‰è£…<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>å®‰è£…<code>Composer</code> <span class="exturl" data-url="aHR0cDovL2RvY3MucGhwY29tcG9zZXIuY29tLzAwLWludHJvLmh0bWw=">æ­¥éª¤<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>å®‰è£…<code>laravel</code> <span class="exturl" data-url="aHR0cHM6Ly9kLmxhcmF2ZWwtY2hpbmEub3JnL2RvY3MvNS41L2luc3RhbGxhdGlvbg==">æ­¥éª¤<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>å®‰è£…<code>cocopods</code> <span class="exturl" data-url="aHR0cHM6Ly9ndWlkZXMuY29jb2Fwb2RzLm9yZy91c2luZy9nZXR0aW5nLXN0YXJ0ZWQuaHRtbA==">æ­¥éª¤<i class="fa fa-external-link-alt"></i></span>  æ„å¤–å‘ç°æ ¹ç›®å½•ä¸‹çš„.cocopodsä»“åº“ä¸­çš„ç›®å½•å’Œä»¥å‰ç‰ˆæœ¬ä¸åŒäº†</p>
</li>
<li><p>å¯¼å‡ºé’¥åŒ™ä¸²ä¸­çš„è¯ä¹¦/p12åˆ°æ–°ç”µè„‘ä¸­</p>
</li>
<li><p>åŒæ­¥å¤‡å¿˜å½•ä¸­çš„æ–‡ç« ä¿¡æ¯</p>
</li>
</ol>
<h2 id="é…ç½®iterm2-zsh-å‚è€ƒ"><a href="#é…ç½®iterm2-zsh-å‚è€ƒ" class="headerlink" title="é…ç½®iterm2/ zsh å‚è€ƒ"></a>é…ç½®iterm2/ zsh å‚è€ƒ</h2><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAwOTkxOTcxNA==">https://segmentfault.com/a/1190000009919714<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxMDUxODE5NQ==">https://segmentfault.com/a/1190000010518195<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9sYW9zaHV0ZXJyeS5naXRib29rcy5pby9tYWNfb3Nfc2V0dXBfZ3VpZGUvY29udGVudC80X1pzaENvbmZpZy5odG1s">https://laoshuterry.gitbooks.io/mac_os_setup_guide/content/4_ZshConfig.html<i class="fa fa-external-link-alt"></i></span><br>ZSHçš„ä¸»é¢˜å‚è€ƒ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JvYmJ5cnVzc2VsbC9vaC1teS16c2gvd2lraS9UaGVtZXM=">https://github.com/robbyrussell/oh-my-zsh/wiki/Themes<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>bashå’Œzshäº’ç›¸åˆ‡æ¢</p>
</blockquote>
<ul>
<li>åˆ‡æ¢bash</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chsh -s &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ‡æ¢zsh</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chsh -s &#x2F;bin&#x2F;zsh</span><br></pre></td></tr></table></figure>


<h2 id="å…³äºç¯å¢ƒå˜é‡"><a href="#å…³äºç¯å¢ƒå˜é‡" class="headerlink" title="å…³äºç¯å¢ƒå˜é‡"></a>å…³äºç¯å¢ƒå˜é‡</h2><p><span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDQxNjEwMS9hcnRpY2xlL2RldGFpbHMvNTQ2MTg2MjE=">ç¯å¢ƒå˜é‡<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vc2hpbmVxaXVqdWFuL3AvNDY5MzQwNC5odG1s">MACè®¾ç½®ç¯å¢ƒå˜é‡pathçš„å‡ ç§æ–¹æ³•<i class="fa fa-external-link-alt"></i></span></p>
<p>1ï¼‰/etc/paths ï¼ˆå…¨å±€å»ºè®®ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ ï¼‰<br>ç¼–è¾‘ pathsï¼Œå°†ç¯å¢ƒå˜é‡æ·»åŠ åˆ° pathsæ–‡ä»¶ä¸­ ï¼Œä¸€è¡Œä¸€ä¸ªè·¯å¾„<br>Hintï¼šè¾“å…¥ç¯å¢ƒå˜é‡æ—¶ï¼Œä¸ç”¨ä¸€ä¸ªä¸€ä¸ªåœ°è¾“å…¥ï¼Œåªè¦æ‹–åŠ¨æ–‡ä»¶å¤¹åˆ° Terminal é‡Œå°±å¯ä»¥äº†ã€‚</p>
<p>2ï¼‰/etc/profile ï¼ˆå»ºè®®ä¸ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ ï¼‰<br>å…¨å±€ï¼ˆå…¬æœ‰ï¼‰é…ç½®ï¼Œä¸ç®¡æ˜¯å“ªä¸ªç”¨æˆ·ï¼Œç™»å½•æ—¶éƒ½ä¼šè¯»å–è¯¥æ–‡ä»¶ã€‚</p>
<p>3ï¼‰/etc/bashrc ï¼ˆä¸€èˆ¬åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ç³»ç»Ÿçº§ç¯å¢ƒå˜é‡ï¼‰<br>å…¨å±€ï¼ˆå…¬æœ‰ï¼‰é…ç½®ï¼Œbash shellæ‰§è¡Œæ—¶ï¼Œä¸ç®¡æ˜¯ä½•ç§æ–¹å¼ï¼Œéƒ½ä¼šè¯»å–æ­¤æ–‡ä»¶ã€‚</p>
<p>4ï¼‰<br>1.åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š<br>sudo touch /etc/paths.d/mysql<br>2.ç”¨ vim æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼ˆå¦‚æœæ˜¯ä»¥ open -t çš„æ–¹å¼æ‰“å¼€ï¼Œåˆ™ä¸å…è®¸ç¼–è¾‘ï¼‰ï¼š<br>sudo vim /etc/paths.d/mysql<br>3.ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œé”®å…¥è·¯å¾„å¹¶ä¿å­˜ï¼ˆå…³é—­è¯¥ Terminal çª—å£å¹¶é‡æ–°æ‰“å¼€ä¸€ä¸ªï¼Œå°±èƒ½ä½¿ç”¨ mysql å‘½ä»¤äº†ï¼‰<br>/usr/local/mysql/bin<br>è¿™æ ·å¯ä»¥è‡ªå·±ç”Ÿæˆæ–°çš„æ–‡ä»¶ï¼Œä¸ç”¨æŠŠå˜é‡å…¨éƒ½æ”¾åˆ° paths ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p>
<blockquote>
<p>.dæ–‡ä»¶ä¸å¸¸è§ï¼Œæœ‰å¯èƒ½æ˜¯æŸä¸ªåº”ç”¨è‡ªå·±ç‰¹æœ‰çš„æ–‡ä»¶ï¼Œ.dä¹Ÿå¯èƒ½æ˜¯defaultçš„æ„æ€,è¡¨ç¤ºé»˜è®¤ï¼ˆé…ç½®ï¼‰æ–‡ä»¶ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯Dynamicçš„æ„æ€ï¼Œè¡¨ç¤ºåŠ¨æ€æ„ä¹‰çš„æ–‡ä»¶ã€‚<br>å¸¦.dçš„æ–‡ä»¶å¤¹æ¯”è¾ƒå¸¸è§ï¼Œæ¯”å¦‚/etc/rc3.dã€/etc/dev.dè¡¨ç¤ºæ–‡ä»¶åŠ ä¸‹æœ‰ç³»ç»Ÿç¼ºçœçš„é…ç½®æ–‡ä»¶ã€‚</p>
</blockquote>
<p>profileã€bash_profileã€bashrcæ–‡ä»¶çš„ä½œç”¨ä¸åŒºåˆ«å‚è€ƒ<br><span class="exturl" data-url="aHR0cHM6Ly9pdGJpbHUuY29tL2xpbnV4L21hbmFnZW1lbnQvTnlJOWNqaXBsLmh0bWw=">https://itbilu.com/linux/management/NyI9cjipl.html<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9qaW5neWFuLmJhaWR1LmNvbS9hcnRpY2xlL2YyNWVmMjU0YThmNGE2NDgyZDFiODI2MS5odG1s">https://jingyan.baidu.com/article/f25ef254a8f4a6482d1b8261.html<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>Live</category>
      </categories>
      <tags>
        <tag>Live</tag>
      </tags>
  </entry>
</search>
